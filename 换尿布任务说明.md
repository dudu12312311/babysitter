# 🍼 换尿布任务 - 使用说明

## 📋 功能说明

这是一个互动式的换尿布任务游戏，包含视觉反馈：
- ✅ **任务开始**: 显示哭脸😭（宝宝不舒服）
- ✅ **成功完成**: 显示笑脸😊（宝宝舒服了）
- ✅ **失败**: 继续哭脸😭（需要重试）

## 🎮 如何使用

### 步骤 1: 启动应用

```bash
python main.py
```

### 步骤 2: 访问换尿布任务

打开浏览器访问：
```
http://localhost:5000/diaper
```

或者先访问首页，然后点击"换尿布任务"链接：
```
http://localhost:5000
```

### 步骤 3: 完成任务

1. **调整提腿速度**
   - 使用滑块设置提腿速度（1-10秒）
   - 建议: 3-4秒
   - ⚠️ 太慢可能触发"喷射袭击"！

2. **设置擦拭彻底度**
   - 使用滑块设置擦拭次数（1-10次）
   - 建议: 7-9次
   - 太少不干净，太多浪费时间

3. **选择尿布放置顺序**
   - ✅ 正确：先擦拭再穿新尿布
   - ❌ 错误：没擦就穿新尿布（会触发尿布疹）

4. **点击"开始换尿布"**
   - 系统会执行任务
   - 显示结果和宝宝表情变化

## 🎯 任务结果

### 成功情况

**表情变化**: 😭 → 😊

**数值变化**:
- 清洁度: +50
- 快乐度: +15
- 健康值: 0
- 压力值: 0

**提示消息**: "✅ 换尿布成功！宝宝感觉清爽多了"

### 失败情况

#### 1. 喷射袭击（30%概率）

**触发条件**: 提腿速度 > 5秒

**表情**: 😭（继续哭）

**数值变化**:
- 清洁度: +25（只恢复50%）
- 快乐度: 0
- 健康值: 0
- 压力值: +25

**提示消息**: "💩 手慢了！触发喷射袭击事件，屏幕被糊满！"

#### 2. 擦拭不彻底

**触发条件**: 擦拭次数 < 5

**数值变化**:
- 清洁度: 减少10点

**提示消息**: "🧻 擦拭不够彻底"

#### 3. 尿布疹

**触发条件**: 选择"没擦就穿新尿布"

**表情**: 😭（继续哭）

**数值变化**:
- 清洁度: +20（恢复有限）
- 快乐度: 0
- 健康值: -15
- 压力值: 0

**提示消息**: "🔴 顺序错误！没擦就穿新尿布，触发尿布疹"

## 🎨 界面特点

### 视觉反馈

1. **宝宝表情**
   - 大号表情符号（150px）
   - 哭脸会抖动动画
   - 笑脸会弹跳动画

2. **状态文字**
   - 哭脸时显示红色文字
   - 笑脸时显示绿色文字

3. **数值显示**
   - 清洁度变化
   - 快乐度变化
   - 健康值变化
   - 压力值变化

### 交互控制

1. **滑块控制**
   - 实时显示当前值
   - 平滑拖动体验

2. **下拉选择**
   - 清晰的选项说明
   - ✅/❌ 图标标识

3. **按钮反馈**
   - 悬停效果
   - 点击动画

## 📊 游戏机制

### 成功条件

1. 提腿速度 ≤ 5秒
2. 擦拭次数 ≥ 5次
3. 选择正确的放置顺序

### 随机事件

- **喷射袭击**: 30%概率触发（当提腿速度 > 5秒时）

### 评分系统

| 操作 | 评分标准 |
|------|---------|
| 提腿速度 | 3-4秒最佳 |
| 擦拭次数 | 7-9次最佳 |
| 放置顺序 | 必须正确 |

## 🔧 技术实现

### 文件结构

```
├── diaper_change_task.py    # 换尿布任务模块
├── main.py                  # 主应用（已更新）
└── hardcore_parenting_game.py  # 游戏逻辑
```

### API 端点

| 端点 | 方法 | 说明 |
|------|------|------|
| `/diaper` | GET | 换尿布任务页面 |
| `/diaper/execute` | POST | 执行换尿布任务 |

### 请求格式

```json
{
  "lift_speed": 3.0,
  "wipe_thoroughness": 7,
  "diaper_placement": "correct"
}
```

### 响应格式

```json
{
  "success": true,
  "message": "✅ 换尿布成功！宝宝感觉清爽多了",
  "state_changes": {
    "cleanliness": 50,
    "happiness": 15,
    "health": 0,
    "parent_stress": 0
  },
  "special_effects": []
}
```

## 💡 使用建议

### 最佳策略

1. **提腿速度**: 设置为 3-4秒
2. **擦拭次数**: 设置为 7-9次
3. **放置顺序**: 始终选择"先擦拭再穿新尿布"

### 避免失败

- ❌ 不要设置提腿速度 > 5秒
- ❌ 不要擦拭次数 < 5次
- ❌ 不要选择错误的放置顺序

### 体验建议

- 🎮 先尝试不同参数，体验各种结果
- 📊 观察数值变化，理解游戏机制
- 🔄 使用"再来一次"按钮快速重试

## 🎓 教育意义

这个任务模拟了真实的换尿布场景：

1. **速度重要性**: 动作太慢可能导致意外
2. **彻底清洁**: 擦拭不彻底会影响宝宝健康
3. **正确顺序**: 步骤顺序错误会导致问题

## ⚠️ 注意事项

1. **浏览器兼容性**: 建议使用 Chrome、Firefox、Edge
2. **网络连接**: 需要连接到本地服务器
3. **JavaScript**: 必须启用 JavaScript

## 🐛 故障排查

### 问题 1: 页面无法访问

**解决**:
```bash
# 确认应用正在运行
python main.py

# 检查端口是否正确
http://localhost:5000/diaper
```

### 问题 2: 任务执行失败

**检查**:
- 游戏模块是否正确导入
- hardcore_parenting_game.py 是否存在
- execute_diaper_task 方法是否可用

### 问题 3: 表情不显示

**原因**: 浏览器不支持表情符号

**解决**: 使用现代浏览器（Chrome、Firefox、Edge）

## 🎉 完成！

现在你可以：
- ✅ 在网页中玩换尿布任务
- ✅ 看到宝宝表情变化（哭脸→笑脸）
- ✅ 体验真实的换尿布场景
- ✅ 学习正确的护理方法

**开始游戏**: http://localhost:5000/diaper

祝你游戏愉快！🍼
