# Railway ç½‘é¡µç‰ˆå®Œæ•´æ“ä½œæŒ‡å—

## ğŸ¯ ç›®æ ‡
ä¿®å¤ "uvicorn could not be found" é”™è¯¯ï¼Œè®©åº”ç”¨æˆåŠŸéƒ¨ç½²

---

## ğŸ“ ç¬¬ä¸€æ­¥ï¼šè¿›å…¥ Railway é¡¹ç›®

1. **æ‰“å¼€æµè§ˆå™¨**ï¼Œè®¿é—®ï¼šhttps://railway.app/

2. **ç™»å½•ä½ çš„è´¦å·**

3. **æ‰¾åˆ°ä½ çš„é¡¹ç›®**
   - åœ¨é¦–é¡µï¼ˆDashboardï¼‰æ‰¾åˆ° "babysitter" é¡¹ç›®
   - ç‚¹å‡»é¡¹ç›®å¡ç‰‡è¿›å…¥

---

## ğŸ”§ ç¬¬äºŒæ­¥ï¼šä¿®æ”¹éƒ¨ç½²è®¾ç½®ï¼ˆRailway ç½‘é¡µç‰ˆï¼‰

### æ–¹æ³•1ï¼šé€šè¿‡ Service Settingsï¼ˆæ¨èï¼‰

1. **è¿›å…¥é¡¹ç›®å**ï¼Œä½ ä¼šçœ‹åˆ°ï¼š
   - å·¦ä¾§ï¼šæœåŠ¡åˆ—è¡¨ï¼ˆå¯èƒ½æ˜¾ç¤º "babysitter" æˆ– "web"ï¼‰
   - å³ä¾§ï¼šéƒ¨ç½²å†å²å’Œæ—¥å¿—

2. **ç‚¹å‡»ä½ çš„æœåŠ¡**
   - ç‚¹å‡»å·¦ä¾§çš„æœåŠ¡åç§°ï¼ˆé€šå¸¸æ˜¯ "babysitter" æˆ–æ˜¾ç¤º GitHub å›¾æ ‡çš„é‚£ä¸ªï¼‰

3. **è¿›å…¥ Settings æ ‡ç­¾**
   - åœ¨é¡¶éƒ¨æ‰¾åˆ°å¹¶ç‚¹å‡» **"Settings"** æ ‡ç­¾
   - å…¶ä»–æ ‡ç­¾å¯èƒ½åŒ…æ‹¬ï¼šDeployments, Metrics, Variables ç­‰

4. **æ‰¾åˆ° Deploy éƒ¨åˆ†**
   - åœ¨ Settings é¡µé¢å‘ä¸‹æ»šåŠ¨
   - æ‰¾åˆ° **"Deploy"** éƒ¨åˆ†

5. **ä¿®æ”¹ Custom Start Command**
   - æ‰¾åˆ° **"Custom Start Command"** æˆ– **"Start Command"** è¾“å…¥æ¡†
   - å¦‚æœæ˜¯ç©ºçš„æˆ–æ˜¾ç¤ºå…¶ä»–å‘½ä»¤ï¼Œç‚¹å‡»ç¼–è¾‘
   - è¾“å…¥ï¼š`python main.py`
   - ç‚¹å‡»ä¿å­˜æˆ–ç›´æ¥æŒ‰å›è½¦

6. **ä¿®æ”¹ Custom Build Commandï¼ˆå¯é€‰ï¼‰**
   - å¦‚æœæœ‰ "Custom Build Command" è¾“å…¥æ¡†
   - ç¡®ä¿æ˜¯ç©ºçš„ï¼Œæˆ–è€…è¾“å…¥ï¼š`pip install -r requirements.txt`

7. **ä¿å­˜è®¾ç½®**
   - æœ‰äº›è®¾ç½®ä¼šè‡ªåŠ¨ä¿å­˜
   - å¦‚æœæœ‰ "Save" æŒ‰é’®ï¼Œç‚¹å‡»å®ƒ

---

### æ–¹æ³•2ï¼šé€šè¿‡ Variables è®¾ç½®ç¯å¢ƒå˜é‡

1. **åœ¨ Settings é¡µé¢**ï¼Œæ‰¾åˆ° **"Variables"** æ ‡ç­¾

2. **æ·»åŠ ç¯å¢ƒå˜é‡**ï¼ˆå¦‚æœéœ€è¦ï¼‰
   - ç‚¹å‡» **"New Variable"** æˆ– **"Add Variable"**
   - å˜é‡åï¼š`FLASK_APP`
   - å€¼ï¼š`main.py`
   - ç‚¹å‡» "Add"

---

## ğŸ”„ ç¬¬ä¸‰æ­¥ï¼šé‡æ–°éƒ¨ç½²

### é€‰é¡¹Aï¼šè§¦å‘æ–°éƒ¨ç½²

1. **å›åˆ° Deployments æ ‡ç­¾**
   - ç‚¹å‡»é¡¶éƒ¨çš„ **"Deployments"** æ ‡ç­¾

2. **ç‚¹å‡» "Deploy" æŒ‰é’®**
   - åœ¨å³ä¸Šè§’æ‰¾åˆ° **"Deploy"** æˆ– **"Redeploy"** æŒ‰é’®
   - ç‚¹å‡»å®ƒ

3. **ç­‰å¾…éƒ¨ç½²å®Œæˆ**
   - è§‚å¯Ÿéƒ¨ç½²è¿›åº¦
   - ç­‰å¾… 1-2 åˆ†é’Ÿ

### é€‰é¡¹Bï¼šé€šè¿‡ GitHub è§¦å‘ï¼ˆå¦‚æœä¸Šé¢æ‰¾ä¸åˆ°æŒ‰é’®ï¼‰

1. **å» GitHub ä¿®æ”¹æ–‡ä»¶**ï¼ˆè§ä¸‹ä¸€éƒ¨åˆ†ï¼‰
2. Railway ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°æ›´æ”¹å¹¶é‡æ–°éƒ¨ç½²

---

## ğŸ“ ç¬¬å››æ­¥ï¼šåœ¨ GitHub ä¸Šä¿®æ”¹é…ç½®æ–‡ä»¶

å¦‚æœ Railway ç½‘é¡µä¸Šæ‰¾ä¸åˆ°è®¾ç½®ï¼Œç›´æ¥åœ¨ GitHub ä¿®æ”¹ï¼š

### 1. åˆ é™¤ start.sh

1. è®¿é—®ï¼šhttps://github.com/dudu12312311/babysitter
2. æ‰¾åˆ° `start.sh` æ–‡ä»¶
3. ç‚¹å‡»æ–‡ä»¶å
4. ç‚¹å‡»å³ä¸Šè§’çš„ **åƒåœ¾æ¡¶å›¾æ ‡**ï¼ˆåˆ é™¤ï¼‰
5. æäº¤åˆ é™¤ï¼šè¾“å…¥ "åˆ é™¤start.sh" â†’ ç‚¹å‡» "Commit changes"

### 2. ä¿®æ”¹ nixpacks.toml

1. åœ¨ GitHub ä»“åº“ä¸­ç‚¹å‡» `nixpacks.toml`
2. ç‚¹å‡» **é“…ç¬”å›¾æ ‡**ï¼ˆç¼–è¾‘ï¼‰
3. **åˆ é™¤æ‰€æœ‰å†…å®¹**ï¼Œæ›¿æ¢ä¸ºï¼š

```toml
[phases.setup]
nixPkgs = ["python311"]

[phases.install]
cmds = ["pip install -r requirements.txt"]

[phases.build]
cmds = ["echo 'Build complete'"]

[start]
cmd = "python main.py"
```

4. æ»šåŠ¨åˆ°åº•éƒ¨
5. æäº¤ä¿¡æ¯ï¼š`ä¿®å¤å¯åŠ¨å‘½ä»¤`
6. ç‚¹å‡» **"Commit changes"**

### 3. ä¿®æ”¹ railway.json

1. ç‚¹å‡» `railway.json` æ–‡ä»¶
2. ç‚¹å‡» **é“…ç¬”å›¾æ ‡**
3. **åˆ é™¤æ‰€æœ‰å†…å®¹**ï¼Œæ›¿æ¢ä¸ºï¼š

```json
{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "nixpacks"
  },
  "deploy": {
    "startCommand": "python main.py",
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 3
  }
}
```

4. æäº¤æ›´æ”¹

### 4. ç¡®è®¤ requirements.txt

1. ç‚¹å‡» `requirements.txt`
2. ç¡®ä¿å†…å®¹åªæœ‰ï¼š

```
Flask==2.3.3
```

3. å¦‚æœä¸æ˜¯ï¼Œç¼–è¾‘å¹¶ä¿®æ”¹
4. æäº¤æ›´æ”¹

### 5. ç¡®è®¤ Procfile

1. ç‚¹å‡» `Procfile`
2. ç¡®ä¿å†…å®¹æ˜¯ï¼š

```
web: python main.py
```

3. å¦‚æœä¸æ˜¯ï¼Œç¼–è¾‘å¹¶ä¿®æ”¹
4. æäº¤æ›´æ”¹

---

## âœ… ç¬¬äº”æ­¥ï¼šéªŒè¯éƒ¨ç½²

1. **å›åˆ° Railway æ§åˆ¶å°**

2. **æŸ¥çœ‹ Deployments**
   - åº”è¯¥çœ‹åˆ°æ–°çš„éƒ¨ç½²æ­£åœ¨è¿›è¡Œ
   - çŠ¶æ€åº”è¯¥ä» "Building" â†’ "Deploying" â†’ "Success"

3. **æŸ¥çœ‹æ—¥å¿—**
   - ç‚¹å‡»æœ€æ–°çš„éƒ¨ç½²
   - æŸ¥çœ‹æ—¥å¿—è¾“å‡º
   - åº”è¯¥çœ‹åˆ°ï¼š
     ```
     ç¡¬æ ¸è‚²å„¿æ¨¡æ‹Ÿå™¨å¯åŠ¨ä¸­...
     Pythonç‰ˆæœ¬: 3.11.x
     ğŸš€ å¯åŠ¨ Flask åº”ç”¨
     ```

4. **è·å–åº”ç”¨ URL**
   - åœ¨é¡¹ç›®é¡µé¢é¡¶éƒ¨æˆ– Settings ä¸­æ‰¾åˆ°åº”ç”¨ URL
   - ç±»ä¼¼ï¼š`https://babysitter-production-xxxx.up.railway.app`

5. **æµ‹è¯•åº”ç”¨**
   - åœ¨æµè§ˆå™¨è®¿é—®ï¼š`https://ä½ çš„URL/health`
   - åº”è¯¥çœ‹åˆ°ï¼š`{"status": "healthy"}`

---

## ğŸ†˜ å¦‚æœè¿˜æ˜¯å¤±è´¥

### æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

1. **åœ¨ Railway é¡¹ç›®é¡µé¢**
2. **ç‚¹å‡» Deployments æ ‡ç­¾**
3. **ç‚¹å‡»æœ€æ–°çš„å¤±è´¥éƒ¨ç½²**
4. **æŸ¥çœ‹å®Œæ•´æ—¥å¿—**
5. **æˆªå›¾æˆ–å¤åˆ¶é”™è¯¯ä¿¡æ¯**
6. **å‘Šè¯‰æˆ‘å…·ä½“é”™è¯¯**

### å¸¸è§é—®é¢˜

**é—®é¢˜1ï¼šè¿˜æ˜¯æ˜¾ç¤º "uvicorn could not be found"**
- ç¡®è®¤ GitHub ä¸Šçš„æ–‡ä»¶å·²ç»æ›´æ–°
- åœ¨ Railway æ‰‹åŠ¨è§¦å‘é‡æ–°éƒ¨ç½²
- æ£€æŸ¥æ˜¯å¦æœ‰ç¼“å­˜ï¼Œå°è¯• "Clear Cache and Redeploy"

**é—®é¢˜2ï¼šæ‰¾ä¸åˆ° Settings æ ‡ç­¾**
- ç¡®ä¿ç‚¹å‡»äº†å·¦ä¾§çš„æœåŠ¡åç§°
- å°è¯•åˆ·æ–°é¡µé¢
- æ£€æŸ¥æ˜¯å¦æœ‰æƒé™

**é—®é¢˜3ï¼šéƒ¨ç½²æˆåŠŸä½†æ— æ³•è®¿é—®**
- æ£€æŸ¥åº”ç”¨æ˜¯å¦çœŸçš„åœ¨è¿è¡Œ
- æŸ¥çœ‹æ—¥å¿—ç¡®è®¤ç«¯å£ç»‘å®š
- ç¡®è®¤ Railway åˆ†é…äº†å…¬ç½‘ URL

---

## ğŸ“‹ å®Œæ•´æ£€æŸ¥æ¸…å•

- [ ] åˆ é™¤äº† start.sh æ–‡ä»¶
- [ ] ä¿®æ”¹äº† nixpacks.tomlï¼ˆå¯åŠ¨å‘½ä»¤ï¼špython main.pyï¼‰
- [ ] ä¿®æ”¹äº† railway.jsonï¼ˆstartCommand: python main.pyï¼‰
- [ ] ç¡®è®¤äº† requirements.txtï¼ˆåªæœ‰ Flask==2.3.3ï¼‰
- [ ] ç¡®è®¤äº† Procfileï¼ˆweb: python main.pyï¼‰
- [ ] åœ¨ Railway è§¦å‘äº†é‡æ–°éƒ¨ç½²
- [ ] æŸ¥çœ‹äº†éƒ¨ç½²æ—¥å¿—
- [ ] æµ‹è¯•äº† /health ç«¯ç‚¹

---

## ğŸ¯ æœ€ç®€å•çš„æ–¹æ³•ï¼ˆå¦‚æœä¸Šé¢éƒ½ä¸è¡Œï¼‰

**ç›´æ¥åœ¨ Railway é¡¹ç›®ä¸­ï¼š**

1. ç‚¹å‡»é¡¹ç›®åç§°æ—è¾¹çš„ **ä¸‰ä¸ªç‚¹** â‹® æˆ– **é½¿è½®å›¾æ ‡** âš™ï¸
2. é€‰æ‹© **"Settings"** æˆ– **"Project Settings"**
3. æ‰¾åˆ° **"Service"** éƒ¨åˆ†
4. æŸ¥æ‰¾ä»»ä½•ä¸ "Start Command" æˆ– "Build Command" ç›¸å…³çš„è®¾ç½®
5. ä¿®æ”¹ä¸ºï¼š`python main.py`

å¦‚æœå®åœ¨æ‰¾ä¸åˆ°ï¼Œ**æˆªå›¾ç»™æˆ‘çœ‹ Railway çš„ç•Œé¢**ï¼Œæˆ‘å¸®ä½ æ‰¾å…·ä½“ä½ç½®ï¼
